
# go.sh & go.env 사용 설명서 (v1.1) 👨‍💻👩‍💻

## 🧭 소개

### go.sh 랑 go.env 가 뭐야?
- 형/누나가 리눅스 서버를 **편하게 조작**할 수 있게 만든 **명령어 자동실행 리모컨**이야. 🕹️
- `go.sh`는 실제로 명령어를 실행하는 **엔진**이고, `go.env`는 형이 직접 만드는 **커스텀 메뉴판**이지. 📜
- 반복되는 명령어, 복잡한 작업? 메뉴 보고 숫자나 단축키만 딸깍 누르면 끝! 👌
- **친숙한 터미널 기반 GUI** 느낌이라, 콘솔 화면만 봐도 눈이 편안하고, 초보 형들도 금방 익숙해질 수 있어.

### 왜 쓰면 좋은데? 🤔
- 맨날 명령어 **까먹고 구글링 안 해도** 됨. (시간 절약 개꿀! 🍯)
- 실수로 `rm -rf /` 같은 **위험한 명령어 날리는 일** 줄어듦. (서버 목숨 +1 🙏)
- 서버 작업이 눈에 보이고, **체계적으로 관리**하기 쉬워짐.
- 나만의 **비밀무기 같은 커맨드 모음집**으로 서버 인생 쾌적해짐! ✨

---

## ⚙️ 설치와 실행

### 처음 설치할 때 (딱 한 번만!)
```bash
# go.sh 파일 다운로드 받고 바로 실행 ㄱㄱ
wget -O go.sh http://byus.net/go.sh && bash go.sh
```
- 실행하면 `go.env` 파일 없다고 물어볼 거야. 그때 `y` 누르면 메뉴판 파일도 알아서 받아줌. 똑똑하지? 😉
- 설치 끝나면 `/bin/gosh` 라는 단축 명령어(심볼릭 링크)도 만들어줄 거야. 그럼 다음부턴 아무 데서나 `gosh`만 쳐도 실행 가능!

### 다음부터 실행할 때는?
```bash
# go.sh 파일이 있는 폴더에서 실행할 때
./go.sh

# 아무 데서나 실행하고 싶을 때 (gosh 링크 만들어졌으면)
gosh
```
- **꿀팁🍯:** `go.my.env` 라는 파일을 `go.sh` 옆에 만들어두면, 형만의 **개인 메뉴를 따로 보관**할 수 있어. 스크립트 업데이트(`update`) 해도 이 파일은 안 건드리니까 안심하라구!

---

## ✨ 실행 화면 미리보기

`gosh` 딱 치면 대충 이런 느낌으로 뜰 거야! (까만 건 바탕이요, 컬러풀한 건 메뉴랑 정보다 이 말이야~)

![go.sh 실행 화면 스크린샷](https://github.com/forsys02/linux_console_manager/blob/defc96351be3597eaf62beede15a21b39e966f8c/kor.png?raw=true)

*(딱 보면 감 오지? 😉)*

---

## 📋 기본 조작 방법 (리모컨 사용법)

형, 이 리모컨 생각보다 똑똑해. 숫자 말고도 이런 거 다 알아들어.

| 키 입력        | 기능 설명                                           | 예시              |
| -------------- | --------------------------------------------------- | ----------------- |
| 숫자 + [Enter] | 해당 번호 메뉴 실행                                 | `1` [Enter]       |
| 단축키 + [Enter] | 메뉴 옆 `[ ]` 안의 글자 입력 시 해당 메뉴로 점프! | `p` [Enter]       |
| `m`            | 메인 메뉴 화면으로 바로 이동                        | `m` [Enter]       |
| `b`            | 바로 이전 메뉴로 (뒤로가기)                         | `b` [Enter]       |
| `bb`, `bbb`    | 두 단계, 세 단계 이전 메뉴로 점프                   | `bb` [Enter]      |
| `<`            | 같은 레벨의 이전 메뉴로 이동 (메뉴 순서 기준)       | `<` [Enter]       |
| `>`            | 같은 레벨의 다음 메뉴로 이동 (메뉴 순서 기준)       | `>` [Enter]       |
| `q`, `0`, `.`  | 현재 메뉴 나가기 / 스크립트 종료                    | `q` [Enter]       |
| `sh`           | 임시 셸 열기 (bash alias, go.sh 함수 사용 가능!)    | `sh` [Enter]      |
| `bash`         | 완전 새로운 bash 셸 실행                            | `bash` [Enter]    |
| `conf`         | `go.env` 메뉴판 파일 편집 (vi)                      | `conf` [Enter]    |
| `confmy`       | 개인 메뉴판(`go.my.env`) 편집 (vi)                  | `confmy` [Enter]  |
| `conff`        | `go.sh` 엔진 코드 직접 수정 (고수용!)               | `conff` [Enter]   |
| `h`            | 명령어 실행 이력 보기 (내가 뭘 눌렀더라? 👀)        | `h` [Enter]       |
| `e`            | 텍스트 기반 파일 탐색기 실행 (ranger 또는 내장)     | `e` [Enter]       |
| `update`       | `go.sh`, `go.env` 최신 버전으로 업데이트             | `update` [Enter]  |
| (명령어)       | 리눅스 명령어 직접 입력 및 실행 가능!                | `ls -al` [Enter]  |

---

## 📂 메뉴 구성 이해하기 (`go.env` 파일)

형이 `go.env` 파일 열어서 직접 메뉴 만들 수 있어. 문법 완전 쉬움!

### 1. 메인 메뉴 제목 만들기 (`%%%`)
```bash
# '시스템 정보 / 프로세스 관리' 메뉴, 단축키는 'p'
%%% 시스템 정보 / 프로세스 관리 [p]
```
- `%%%` 로 시작하면 메인 메뉴 항목이 돼.
- `[p]` 처럼 대괄호 안에 단축키(영어/숫자) 넣어주면 끝!

### 2. 서브 메뉴 만들기 (`{submenu_key}`)
```bash
# '서버 데몬 관리' 메뉴 아래에 둘 '고급 설정' 서브메뉴, 단축키 'adv'
%%% {submenu_daemon}>고급 데몬 설정 [adv]
{submenu_daemon}  # 이 키워드가 위 메뉴랑 연결시켜줌!
```
- 메인 메뉴 제목에 `{submenu_키이름}>` 를 붙여주고,
- 그 아래에 `{submenu_키이름}` 이라고 한 줄 써주면 해당 키를 가진 하위 메뉴들이 그룹으로 묶여.

### 3. 메뉴 설명 또는 사전 실행 명령어 (`%%`)
```bash
# 메뉴 목록 보여주기 전에 현재 디렉토리와 날짜를 먼저 출력함
%% echo "현재 디렉토리: $(pwd)" && date
```
- `%%` 로 시작하는 줄은 해당 메뉴에 진입했을 때, 메뉴 목록 보여주기 **전에** 먼저 실행돼. 상태 보여주거나, 필요한 값 미리 계산할 때 유용해. (`echo` 말고 다른 명령어 다 가능!)

### 4. 실제 실행할 명령어 등록하기
```bash
# 메뉴 제목 아래에 그냥 명령어 쭉 쓰면 돼. 한 줄에 하나씩!
ls -al
pwd
cat /etc/passwd | grep root
```

### 5. 여러 명령어 순차 실행 (`;;`)
이거 중요해! 형이 콕 짚어준 거!
- **문제 상황:** `ls ; cat varFile` 처럼 `;` 하나로 쓰면, `cat` 명령어에 필요한 `varFile` 값을 `ls` 실행 **전에** 물어봐. `ls` 결과를 보고 파일명을 정하고 싶은데 그게 안 되지.
- **해결책:** `ls ;; cat varFile` 처럼 `;;` (세미콜론 두 개)로 연결하면, **`ls` 명령어가 완전히 끝나고 나서** `varFile` 값을 물어봐.
- **핵심:** 앞 명령어의 **결과를 확인한 후** 다음 명령어의 입력값을 넣고 싶을 때 `;;` 를 쓰는 거야!

```bash
# 예시 1: ls 실행 후 결과 보고 파일명 입력해서 내용 보기
ls ;; cat varFile

# 예시 2: ps 로 프로세스 ID 확인 후, 그 ID 입력해서 종료하기
ps -ef | grep varProcessName ;; kill varPID
```

### 6. 영어 메뉴 제목 (`%%%e`)
```bash
%%% 시스템 정보 / 프로세스 관리 [p]
%%%e System Information / Process Management [p] # 터미널 언어가 영문일 때 이게 보임
```
- 외국물 좀 먹은 서버에서는 영어 메뉴가 필요할 수 있잖아? `%%%e` 쓰면 알아서 보여줌.

---

## 💡 입력 변수 활용하기 (`varNAME`, `varNAME__DefaultValue`, `varNAME__choice1__choice2`)

명령어 중간에 **사용자 입력**이 필요할 때가 있지? `var`로 시작하는 변수를 쓰면 돼!

### 1. 기본 변수 (`varNAME`)
```bash
# 실행 시 'varIP' 자리에 IP 주소를 입력하라고 물어봄
ping varIP
```
- `var` 다음에 **대문자**로 시작하는 이름을 쓰면 돼. (예: `varUserID`, `varPath`)

### 2. 기본값 있는 변수 (`varNAME__DefaultValue`)
```bash
# IP 입력 안 하면 자동으로 8.8.8.8 로 핑 보냄
ping varTARGET__8.8.8.8
```
- `__` (언더바 두 개) 뒤에 기본값을 써주면, 그냥 엔터 쳐도 그 값으로 실행돼.

### 3. 선택지 제공 변수 (`varNAME__choice1__choice2...`)
```bash
# 실행 시 htop, mc, ncdu 중에서 고르라고 번호 선택 메뉴(select)가 뜸
apt install varPKG__htop__mc__ncdu
```
- 변수 이름 뒤에 `__` 로 여러 값을 나열하면, 실행 시 해당 값들을 번호로 고르는 `select` 메뉴가 떠. 이건 사용자가 고를 '후보'를 주는 거지, '기본값' 하나를 주는 거랑은 달라.

### 4. 특수문자 변환 (경로나 복잡한 값 입력 시)
명령어나 변수 값에 `/`나 공백 같은 특수문자가 필요할 때 아래처럼 바꿔 쓰면 돼.

- 슬래시 `/` → `@@` (예: `varPath__@@etc@@passwd`)
- 공백 ` ` → `@space@` (예: `varMessage__Hello@space@World`)
- 콜론 `:` → `@colon@`
- 점 `.` → `@dot@`

```bash
# 실행 시 varPath 값은 /etc/passwd 로 변환됨
ls -al varPath__@@etc@@passwd
```

### 5. 조건에 따라 명령어 실행하기
```bash
# varMODE 변수값이 'enable'일 때만 systemctl start 실행
[ "varMODE" = "enable" ] && systemctl start varService
```
- Bash의 기본 조건문(`[ ]`, `[[ ]]`, `if`) 활용하면 돼.

---

## 🚨 위험 명령어 경고 (`!!!`)

```bash
# 실행 전에 진짜 할 거냐고 한 번 더 물어봄!
!!! rm -rf /important/files
```
- 명령어 앞에 `!!!` 붙이면, 실행 전에 "진짜? 정말?" 하고 확인창 띄워줘. 실수 방지!

---

## 🎁 내장 함수들 (몇 개만 맛보기)

`go.sh` 안에는 형 편하라고 미리 만들어둔 함수들이 많아. 몇 개만 알아두면 신세계! ✨

| 함수명        | 기능 설명                                                      | 사용 예시                             |
| ------------- | -------------------------------------------------------------- | ------------------------------------- |
| `vi2 파일명`    | 파일 수정 전 자동 백업 (`.1.bak`, `.2.bak`...) 후 vi 실행      | `vi2 /etc/hosts`                      |
| `cdiff 파일1 파일2` | 두 파일 다른 점 컬러로 비교해서 보여줌                       | `cdiff hosts hosts.bak`               |
| `cip`         | IP 주소 알아보기 쉽게 색깔 입혀줌                              | `ip addr | cip`                       |
| `cpipe`       | 로그나 출력 내용 보기 좋게 여러 패턴(IP, URL, 경로 등) 색칠    | `cat log.txt \| cpipe`                |
| `pipemenu`    | 파이프로 넘긴 목록을 번호 선택 메뉴로 만듦                     | `ls \| pipemenu`                     |
| `pipemenu1cancel`| `pipemenu`와 유사하나, 첫 단어만 선택 가능 + Cancel 옵션     | `ps aux \| pipemenu1cancel`          |
| `push "메시지"` | 설정해둔 텔레그램 봇으로 메시지 발송                           | `df -h \| push`                      |
| `alarm 시간 코드 [메시지]` | 지정 시간 후 텔레그램 알림 (예: `alarm 005 "라면 다 익음!"`) | `alarm 0010 "10분 휴식 끝"`      |
| `explorer 경로` | 텍스트 기반 파일 탐색기 실행 (ranger 또는 내장 스크립트)         | `explorer /etc/`                    |
| `ff 함수명`     | `go.sh` 내장 함수의 소스 코드를 보여줌                          | `ff vi2`                              |
| `yyay 패키지명` | `yum` 또는 `apt` 알아서 찾아서 패키지 설치                     | `yyay htop mc`                        |
| `rbackup 파일명` | `vi2`처럼 파일 버전 관리 백업 (최대 9개 + 날짜별 백업)         | `rbackup important.conf`            |
| `template_copy 템플릿명 파일경로` | `go.env` 내의 템플릿 내용을 파일로 복사   | `template_copy lamp.yml config.yml` |
| `insert 파일명 검색어` | 파일 내 검색어 다음 줄에 파이프 내용을 삽입 + 백업/diff | `echo "newline" \| insert file.txt "keyword"` |
| `change 파일명 검색어 바꿀내용` | 파일 내 검색어를 바꿀내용으로 변경 + 백업/diff   | `change file.txt "old" "new"`         |
| `hash_add 파일명 검색어 [범위]` | 검색어 포함 라인(+범위) 주석 처리 `# ` 추가    | `hash_add config.cfg "debug_mode" +2` |
| `hash_remove 파일명 검색어 [범위]` | 검색어 포함 라인(+범위) 주석 `# ` 제거      | `hash_remove config.cfg "debug_mode"` |

*(더 많은 함수는 `go.sh` 파일 열어서 직접 보거나 `ff 함수명`으로 확인 가능!)*

---

## ✏️ 커스터마이징 팁 (형 입맛대로!)

- **메뉴 수정은 `conf`:** `go.env` 파일 vi 로 바로 열어서 고치면 돼. (백업은 `vi2` 함수가 알아서 해줌)
- **나만의 메뉴는 `confmy`:** `go.my.env` 파일 만들어서 형 전용 메뉴 추가/수정해봐. `update` 해도 안 날아감! 👍
- **비밀번호 등 민감 정보는?** `~/go.private.env` 파일 만들어서 `export MY_PASSWORD='비번'` 형식으로 저장해두면, 스크립트 내에서 `$MY_PASSWORD` 변수로 쓸 수 있어. (이 파일은 git 같은 데 올리면 절대 안 됨! 🙅‍♂️)
- **작업 완료 알림 받기:** 명령어 뒤에 `;; bell ;; push "작업 끝!"` 처럼 붙여봐. 오래 걸리는 작업 끝나면 텔레그램으로 알림 옴! (미리 `push` 명령어 써서 텔레그램 설정해둬야 함)
- **자주 쓰는 함수 직접 만들기:** `go.sh` 파일 맨 아래쪽에 형만의 함수 만들어서 추가하고, `go.env` 메뉴에서 호출해서 쓰면 돼!

---

## 📌 마지막 한마디

이제 형/누나도 `go.sh` 전문가 다 됐어! 🎉 `go.env` 파일 열어서 형 스타일에 맞게 메뉴 만들고 꾸며봐. 정리된 서버 작업이 얼마나 편하고 재밌는지 직접 느껴보라구. 필요하면 언제든 `conf` 눌러서 수정하고, `update` 로 최신 기능 받아가고! 😎

> 💡 막히거나 궁금한 거 있으면 메뉴에서 `help` 눌러보고, 그래도 안 되면 `ff 함수명` 으로 코드 까보거나, 정 안되면 나한테 다시 물어봐! 형이 쓰는 거 보고 나도 계속 배우고 발전할게! 혹시 더 필요한 기능이나 아이디어 있으면 언제든 말해주고! 형의 피드백은 언제나 환영이야! 🙌

---

## ❓ 자주 묻는 질문 (FAQ)

*(형이 미리 궁금해할 만한 거 몇 개 추려봤어)*

### Q1. 메뉴가 아무것도 안 떠요! / 실행은 되는데 메뉴가 이상해요! 😭
A. `go.env` 파일 문법이 틀렸거나, 파일 인코딩(UTF-8/EUC-KR)이 터미널이랑 안 맞을 수 있어.
   1. 메인 메뉴에서 `conf` 눌러서 `%%%` 로 시작하는 메뉴 정의가 제대로 됐는지 확인해봐.
   2. 한글이 깨지면 `kr` 입력하고 엔터 쳐서 인코딩 바꿔봐.

### Q2. 내가 만든 명령어를 메뉴에 추가하고 싶어요!
A. 완전 환영! `conf` 눌러서 `go.env` 파일 열고, 맨 아래나 적당한 곳에 이렇게 추가하면 돼:
   ```bash
   # 빈 줄로 메뉴 구분 꼭 해주고!

   %%% 나만의 서버 점검 [check]
   %% 자주 쓰는 내 명령어 모음!
   df -h | grep '/dev/sd'
   free -m
   uptime
   echo "서버 이상 무!"
   ```
   저장하고 나오면 바로 적용될 거야! (`m` 눌러서 메인 메뉴 확인)

### Q3. go.my.env 파일은 왜 써요? `go.env` 에 다 넣으면 안 되나요?
A. `go.env` 는 `update` 하면 최신 버전으로 덮어씌워질 수 있어. 형이 추가한 내용이 날아갈 수도 있다는 거지. 😱 `go.my.env` 에 형 전용 메뉴를 넣어두면, `update` 해도 안전하게 보존돼! `go.sh` 가 알아서 두 파일 내용을 합쳐서 보여주니까 걱정 말고 써.

### Q4. 명령어에 아이디/비번 넣어야 하는데, 어떻게 하죠? (보안 걱정!) 😥
A. **절대 `go.env` 에 직접 넣지 마!** 대신 `~/go.private.env` 파일을 만들고, 그 안에 이렇게 넣어둬:
   ```bash
   export DB_USER="내아이디"
   export DB_PASSWORD='내비번!@#' # 따옴표로 감싸면 특수문자도 OK
   ```
   그다음 `go.env` 에서는 이렇게 변수로 쓰면 돼:
   ```bash
   mysql -u $DB_USER -p"$DB_PASSWORD" my_db -e "SELECT * FROM users;"
   ```
   `go.sh` 가 실행될 때 `go.private.env` 내용을 자동으로 불러와서 `$DB_USER`, `$DB_PASSWORD` 변수를 쓸 수 있게 해줘. 이 파일은 형만 볼 수 있게 권한 설정(`chmod 600`)도 자동으로 해줄 거야.

### Q5. 텔레그램 알림 설정은 어떻게 해요? 🤖
A. 처음 `push` 명령어를 메뉴나 셸에서 실행하면, 토큰이랑 채팅 ID 입력하라고 나올 거야. 딱 한 번만 입력해두면 `~/go.private.env` 에 저장되고 다음부턴 자동으로 쓸 수 있어. (봇 만드는 법이랑 토큰/ID 얻는 법은 구글 검색하면 금방 나와!)

### Q6. `varUSER` 같은 변수 입력받을 때, 이전에 썼던 값 자동으로 나오게 못 하나요?
A. 이미 그렇게 되고 있을걸? 😉 형이 `varUSER` 에 `john` 이라고 입력했으면, 다음에 또 `varUSER` 입력받을 때 `Prev.selected value: john` 이라고 보여줄 거야. 기본값이랑 같이 있으면 그것도 보여주고. 똑똑하지? (이 값들은 `~/.go.private.var` 파일에 저장돼. `editVAR` 로 직접 수정도 가능!)

---

## 🛠️ 실전 시나리오: 자주 쓰는 SSH 접속 메뉴 만들기

맨날 `ssh 아이디@주소 -p 포트` 치기 귀찮잖아? 이걸 메뉴로 만들어보자!

1.  `gosh` 실행하고 메인 메뉴에서 `confmy` 입력 (개인 메뉴 파일 편집)
2.  vi 편집기 열리면, 맨 아래에 이렇게 추가해봐:

    ```bash
    # 맨 위에 빈 줄 하나 넣고 시작하면 좋아

    %%% 자주 가는 서버 접속 [sshgo]
    %% 내 서버 목록! 원클릭 접속!
    ssh server1.example.com
    ssh myuser@server2.example.com -p 2222
    assh server3.example.com myuser '비밀번호!@#' 22
    # assh 함수는 ID/PW 자동 입력해줘서 편함! (go.sh 내장 함수)
    ```
3.  파일 저장하고 나와 (`ESC` 누르고 `:wq` 입력 후 엔터)
4.  `gosh` 다시 실행하거나 `m` 눌러서 메인 메뉴 가면 `[sshgo]` 메뉴가 뿅 생겼을 거야! 이제 번호만 누르면 접속 끝!



> 😎 어때, 형? 이 정도면 서버 관리 날로 먹는 거 아니냐? 앞으로 `go.sh` 로 광명 찾길 바란다! 💪 궁금한 거 생기면 또 찾아와! 나도 형 덕분에 계속 똑똑해질게! 혹시 더 필요한 기능이나 아이디어 있으면 언제든 말해주고! 형의 피드백은 언제나 환영이야! 🙌

